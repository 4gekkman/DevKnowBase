////=============================================////
////                                             ////
////                    SVG + D3                 ////
////                                             ////
////=============================================////
////                      ////
////         Ссылки       ////
////                      ////
////======================////


  // SVG //
  //-----//

    # Статья про SVG на WIKI
        https://ru.wikipedia.org/wiki/SVG
        https://en.wikipedia.org/wiki/Scalable_Vector_Graphics

    # Туториал по SVG от w3schools
        http://www.w3schools.com/svg/default.asp

    # Mozilla Developer Network - SVG
        https://developer.mozilla.org/ru/docs/Web/SVG

    # Туториал по SVG от Mozilla
        https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial

    # SVG tutorial, example and demonstration site
        http://carto.net

    # Ещё один туториал по SVG
        https://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html

  // D3 //
  //----//

    // Официальные ресурсы D3 //
    //------------------------//

      # Официальный репозиторий D3 на github
          https://github.com/mbostock-bower/d3-bower

      # Официальный сайт D3
          https://d3js.org/

      # Официальная документация (wiki) для D3 (D3 v3.*)
          https://github.com/d3/d3/wiki

      # Официальная документация (wiki) для D3 (D3 v4.*)
          https://github.com/d3/d3/blob/master/README.md#api-reference

      # Официальная галерея примеров для D3
          https://github.com/d3/d3/wiki/Gallery

      # Модули D3
          https://github.com/d3

    // Компоненты и плагины D3 //
    //-------------------------//

      # Компоненты
          https://github.com/d3/d3/wiki/API-Reference

      # Плагины
          https://github.com/d3/d3-plugins


////==================================================////
////                         ////
////        Оглавление       ////
////                         ////
////=========================////

  # A. SVG: основы

    А1. Теоретические основы SVG
    А2. Paths
    А3. Шаблон SVG-файла
    А4. Как добавить SVG в HTML5-страницу
    А5. Градиенты в SVG

    Аn. Библиотека примеров и наработок на SVG

  # Б. D3: основы + справочник

    Б1. Основы D3.js
    Б2. D3-модуль: selections (svg v4.*)

  # В. D3: наработки



////==================================================////
////                         ////
////        Содержание       ////
////                         ////
////=========================////


А1. Теоретические основы SVG

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение

  # Что такое SVG

    ▪ SVG: Scalable Vector Graphics
    ▪ Интерактивность и анимация
    ▪ На основе XML
    ▪ Спецификация разрабатывается W3C с 1999
    ▪ Является открытым стандартом
    ▪ SVG-изображения определяются в текстовых XML-файлах
    ▪ Поддерживается всеми основными современными WEB-браузерами
    ▪ SVG допускает 3 типа объектов: векторная графика, растровая графика и текст
    ▪ Каждый SVG-объект есть в DOM

  # Краткая история SVG

    ▪ Работы над SVG начались в 1998
    ▪ В 2001 году стандарт SVG 1.0 стал W3C-рекомендацией
    ▪ В 2003 году стандарт SVG 1.1 стал W3C-рекомендацией
    ▪ В 2011 году появился SVG 1.1 Second Edition
    ▪ В настоящее время (2016-07-31) ведутся работы над SVG2

  # Возможности SVG

    ▪ Paths
    ▪ Basic shapes
    ▪ Text
    ▪ Painting
    ▪ Color
    ▪ Gradients and patterns
    ▪ Clipping, masking and compositing
    ▪ Filter effects
    ▪ Interactivity
    ▪ Linking
    ▪ Scripting
    ▪ Animation
    ▪ Fonts
    ▪ Metadata

  # Преимущества и недостатки SVG

    ▪ Преимущество: текстовый формат
    ▪ Преимущество: масштабируемость
    ▪ Преимущество: возможность использования растровой графики
    ▪ Преимущество: текст в SVG-изображении является текстом, а не пикселями
    ▪ Преимущество: анимация встроенными средствами, JS-средствами, CSS-средствами
    ▪ Преимущество: открытый стандарт, никто не предъявит
    ▪ Преимущество: лёгкая интеграция с HTML и XHTML
    ▪ Преимущество: совместимость с CSS
    ▪ Преимущество: SVG предоставляет все преимущества XML

    ▪ Недостаток: наследует все недостатки XML
    ▪ Недостаток: сложность использования в крупных картографических приложениях
    ▪ Недостаток: проблемы с производительностью при наличии большого числа мелких деталей

  # Простейший пример использования SVG

    ▪ О чём эта статья
    ▪ Базовые ингридиенты
    ▪ Простейший пример использования SVG
    ▪ Поздние элементы отрисовываются поверх ранних

  # Как вставить SVG в HTML-документ

    ▪ Если это HTML5-документ, можно писать SVG-код прямо в нём
    ▪ SVG можно создать динамически с помощью JS и вставить в DOM
    ▪ С помощью <object>
    ▪ С помощью <iframe>
    ▪ С помощью <img> (но не работает в Firefox<4.0)

  # Возможные типы SVG-файлов

    ▪ Текстовый файл .svg
    ▪ Gzip-файл .svgz

  # HTTP-заголовки при работе с SVG-файлами

    ▪ Для .svg
    ▪ Для .svgz

  # Позиционирование элементов

    ▪ Система координат с нулевой точкой в верхнем левом углу
    ▪ Единицами измерения являются пиксели (px)

--------------------------------------

> Ссылки

  # Статья про SVG на WIKI
      https://ru.wikipedia.org/wiki/SVG
      https://en.wikipedia.org/wiki/Scalable_Vector_Graphics

  # Статьи по основам SVG
      https://svg-art.ru/
      https://developer.mozilla.org/ru/docs/Web/SVG

> Введение
  - В этой главе рассмотрим, что такое SVG в принципе, основы.

> Что такое SVG

  • SVG: Scalable Vector Graphics
    - Масштабируемая векторная графика.

  • Интерактивность и анимация
    - С изображением и его частями можно взаимодействовать из JS.
    - Всё это дело также можно анимировать.

  • На основе XML
    - SVG входит в подмножество расширяемого языка разметки XML.

  • Спецификация разрабатывается W3C с 1999
    - World Wide Web Consortium (W3C) разрабатывает спецификацию SVG с 1999 года.

  • Является открытым стандартом
    - Значит, можно его свободно использовать, и никто тебе не предъявит.

  • SVG-изображения определяются в текстовых XML-файлах
    - Можно создать TXT-файл и написать там SVG-код, создав таким образом SVG-изображение.
    - Чаще всего SVG-изображение создаются специальным ПО.

  • Поддерживается всеми основными современными WEB-браузерами
    - Включая:

      ▪ Mozilla Firefox
      ▪ Internet Explorer
      ▪ Microsoft Edge
      ▪ Google Chrome
      ▪ Opera
      ▪ Safari

  • SVG допускает 3 типа объектов: векторная графика, растровая графика и текст
    - В SVG-изображении могут присутствовать только объекты указанных типов.

  • Каждый SVG-объект есть в DOM
    - И реагирует на любые JS-события.
    - Это является одним из ключевых отличий SVG от Canvas.

> Краткая история SVG

  • Работы над SVG начались в 1998
    - После того, как Macromedia и Microsoft представили формат VML.
    - И после того, как Adobe и Sun представили PGML.
    - То есть, стандарт SVG от W3C стал конкурентом для VML и PGML.

  • В 2001 году стандарт SVG 1.0 стал W3C-рекомендацией
    - 4 сентября 2001 года.

  • В 2003 году стандарт SVG 1.1 стал W3C-рекомендацией
    - 14 января 2003 года.
    - Спецификацию сделали модульной, чтобы позволить подмножествам быть
      определёнными, как профили.
    - Если не считать этого, 1.1 мало чем отличался от 1.0.

  • В 2011 году появился SVG 1.1 Second Edition
    - В нём не появилось никаких новых функций, по сравнению с First Edition.
    - А лишь правки и уточнения.

  • В настоящее время (2016-07-31) ведутся работы над SVG2
    - Больше можно узнать здесь: https://www.w3.org/TR/SVG2/

> Возможности SVG

  • Paths
    - Можно отрисовывать контуры простых и составных фигур, прямыми и кривыми линиями.
    - Короче говоря, можно отрисовать любую фигуру компактной строкой.
    - В ней д.б. описан путь от начальной точки до конечной, через промежуточные.
    - Строка с данными задаётся атрибутом d тега path и содержит команды,
      закодированные набором букв и чисел.
    - Буквы определяют тип команды, числа - её параметры (чаще всего координаты).
    - Команды позволяют описывать фигуры, состоящие из:

      ▪ Отрезков прямых (L, H, V).
      ▪ Кривых Безье (C, S, Q, T).
      ▪ Дуг (A).

    - Регистр букв имеет значение:

      ▪ Буквы в верхнем регистре обозначают абсолютные координаты.
      ▪ Буквы в нижнем регистре обозначают относительные координаты.

  • Basic shapes
    - Можно рисовать основные геометрические фигуры.
    - Например: треугольники, квадраты, полигоны, окружности и т.д.

  • Text
    - Можно добавлять UTF-8 текст.
    - К тексту можно применять много различных визуальных эффектов.
    - Например: писать текст по кривой.

  • Painting

    ▪ Наполнение или обводка
      - Можно наполнить фигуру.
      - А можно сделать обводку с наполнением.
      -

    ▪ Чем можно наполнять
      - Цветом.
      - Градиентом.
      - Паттерном.

    ▪ Наполнение может быть полупрозрачным
      - Сабж.

  • Color
    - Цвета можно применять ко всем видимым SVG-элементам.
    - Прямо, или с помощью "fill", "stroke" и других свойств.
    - Цвета определяются также, как в CSS.
    - Примеры: #000, RGBA(0,0,0,.5), black.

  • Gradients and patterns

    ▪ Линейные и радиальные градиенты
      - Поддерживаются в SVG.

    ▪ Градиенты могут включать любое кол-во цветов
      - В том числе, цвета в градиенте могут и повторяться.

    ▪ Градиенты могут быть полупрозрачными
      - Сабж.

    ▪ Про паттерны
      - Они основаны на предопределённых векторных или растровых объектах.
      - Эти объекты могут быть повторены в x/y направлениях.

    ▪ Градиенты и паттерны могут быть анимированы или заскриптованы
      - Сабж.

    ▪ Градиентные сетки
      - Скорее всего, будут поддерживаться в SVG2.

  • Clipping, masking and compositing
    - Графические элементы - текст, пути, базовые фигуры, и их комбинации -
      могут быть использованы, как контуры для определяния и внутренних,
      и внешних регионов.
    - Определённые регионы могут быть независимо залиты (цветом, градиентом, паттерном).
    - Полностью прозрачные clipping paths и полу-прозрачные маски совмещаются
      друг с другом, чтобы вычислить цвет и полупрозрачность каждого пикселя
      финального изображения.

  • Filter effects

    ▪ Что такое фильтр
      - Набор графических операций, который можно применять к SVG-изображениям.
      - И на выходе получать обработанное этим фильтром SVG-изображение.

    ▪ Фильтры можно применять с помощью св-ва filter
      - Его можно применять к контейнеру, или к любому графическому элементу.

    ▪ Примитивы фильтров
      - Каждый элемент filter может содержать набор примитивов, как дочерние элементы.
      - Каждый примитив обозначает примитивную графическую операцию.

  • Interactivity
    - SVG-изображения могут взаимодействовать с пользователя многоми способами.
    - В дополнение к гиперссылкам: SVG-изображения могут быть восприимчивы к
      событиями интерфейса, таким как изменения фокуса, клики мыши,
      скроллинг и зуминг изображения, события клавиатуры, документы
      и так далее.
    - Обработчики событий могут запускать/останавливать анимации и другие
      процессы, скрипты и т.д.

  • Linking

    ▪ Ссылки на другие документы
      - Можно организовать с помощью XLink.

    ▪ Ссылки на SVG-файлы, которые меняют видимую часть документа
      - Можно организовать с помощью <view> или fragment identifier.
      - Это позволяет создавать состояния, которые используются для
        zoom in/out определённой области, или для ограничения
        представления определённым элементом.
      - Это полезно, когда создаёшь спрайты.

  • Scripting
    - Управлять всеми аспектами SVG-изображения можно в текстово файле.
    - По умолчанию, скриптовым языком для SVG является ECMAScript.
    - DOM-объекты определяются для каждого SVG-элемента.
    - Они реагируют на любые JS-события - мыши, клавиатуры и т.д.

  • Animation

    ▪ Анимация встроенными средствами
      - SVG может быть анимирован встроенными анимационынми элементами.
      - Такими, как: <animate>, <animateMotion> и <animateColor>.

    ▪ Анимация с помощью JS
      - Никто не запрещает анимировать SVG с помощью JS-скриптов.

    ▪ Анимация с помощью CSS3
      - Никто не запрещает анимировать SVG с помощью CSS3.

  • Fonts
    - Как и в HTML/CSS, в SVG можно подключать внешние шрифты.

  • Metadata
    - SVG позволяет авторам добавлять метаданные об SVG-изображении.
    - Они должны быть в элементе <metadata>.
    - Также они могут быть в <title> или <desc>.

> Преимущества и недостатки SVG

  • Преимущество: текстовый формат
    - SVG-изображения можно редактировать в txt-редакторе.
    - SVG-изображения обычно меньше по размеру, чем сравнимып по качеству растровые.

  • Преимущество: масштабируемость
    - Поскольку SVG векторный формат, его легко масштабировать.
    - В отличие от растровых изображений, которые масштабировать нелегко.

  • Преимущество: возможность использования растровой графики
    - Можно вставлять в SVG-изображение растровые картинки (PNG, GIF, JPG).

  • Преимущество: текст в SVG-изображении является текстом, а не пикселями
    - Текст в SVG-изображении является текстом, а не изображением.
    - Поэтому, его можно выделять, копировать, он индексируется.
    - Не нужно создавать дополнительные метафайлы для поисковых роботов.

  • Преимущество: анимация встроенными средствами, JS-средствами, CSS-средствами
    - Есть много способов анимировать SVG-изображение, его части.

  • Преимущество: открытый стандарт, никто не предъявит
    - В отличие от некоторых других форматов, SVG не является чьей-либо собственностью.

  • Преимущество: лёгкая интеграция с HTML и XHTML
    - SVG-документы легко интегрируются с HTML и XHTML документами.
    - Внешние SVG подключаются через тег <object>.
    - Значение атрибута data - путь к файлу с расширением .svg
    - Атрибуты width и height определяют размер области SVG.
    - Элементы SVG совместимы с HTML и DHTML.

  • Преимущество: совместимость с CSS
    - Отображением SVG-элементов можно управлять с помощью CSS.

  • Преимущество: SVG предоставляет все преимущества XML

    ▪ Возможность работы в различных средах.
    ▪ Интернационализация (поддержка юникода).
    ▪ Широкая доступность для различных приложений.
    ▪ Легко изменять с помощью стандартных API
      - Например, с через DOM.
      - Ведь SVG поддерживают стандартизированную W3C объектную модель документа DOM.
      - Что обеспечивает доступ к любому SVG-объекту.
      - Это даёт широкие возможности по динамическому изменения эл-в, их атрибутов.
      - В том числе, работают все стандартные события.
    ▪ Лёгкое преобразование таблицами стилей XSLT
      - Как для любого XML-формата, для обработки SVG можно применять таблицы трансформации (XSLT).
      - Преобразуя XML-данные в SVG с помощью простого XSL, можно легко получать графическое
        представление любых данных.
      - Например, визуализировать химические молекулы, описанные на
        языке CML (Chemical Markup Language).

  • Недостаток: наследует все недостатки XML
    - Сабж.

  • Недостаток: сложность использования в крупных картографических приложениях
    - Для правильного отображения маленькой части изображения
      документ необходимо прочитать полностью.

  • Недостаток: проблемы с производительностью при наличии большого числа мелких деталей
    - Чем больше в изображении мелких деталей, тем быстрее растёт размер SVG-данных.
    - Предельный случай - когда изображение представляет из себя белый шум.
    - В этом случае SVG проиграет растровому файлу по размеру.
    - На практики, SVG становится невыгоден по размеру уже задолго
      до того, как изображение дойдёт до стадии белого шума.

> Простейший пример использования SVG

  • О чём эта статья
    - В этой главе базовый туториал по SVG.
    - Он должен давать хорошее представление об использовании SVG на практике.
    - Однако, здесь будет немного практических примеров, их ищи в главе "An".
    - Справочную же информацию по SVG ищи в последующих главах.

  • Базовые ингридиенты
    - HTML состоит из элементов, определяющих заголовки, параграфы, и т.д.
    - Точно также SVG состоит из эл-в, определяющих кривые, круги, прямоугольники и т.д.
    - Простой SVG-документ выглядит так:

      <svg>
        <!-- Тут несколько SVG-элементов, например, круг и квадрат =) -->
      </svg/

    - Кроме того, с помощью эл-та <g> можно группировать несколько SVG-элементов.
    - Например, так:

      <svg>

        <g>
          <!-- круг -->
          <!-- квадрат -->
        </g>

      </svg>

  • Простейший пример

    ▪ Описание примера
      - В этом примере мы создаём корневой SVG-элемент шириной 300px, высотой 200px.
      - И в него помещаем красный прямоугольник, зелёный круг и текст.

    ▪ Пример на jsfiddle
        https://jsfiddle.net/GermanM/gsssh8vo/

    ▪ Код примера

      <svg version="1.1" baseProfile="full" width="300" height="200" xmlns="http://www.w3.org/2000/svg">
        <rect width="100%" height="100%" fill="red" />
        <circle cx="150" cy="100" r="80" fill="green" />
        <text x="150" y="125" font-size="60" text-anchor="middle" fill="white">SVG</text>
      </svg>

  • Поздние элементы отрисовываются поверх ранних
    - Это важнейшее свойство SVG, которое следует запомнить.
    - Элемент ниже по коду отрисовывается поверх элемента выше по коду.
    - Это хорошо видно на приведённом выше примере:

      ▪ Тексто отрисовывается поверх круга и прямоугольника.
      ▪ Зелёный круг отрисовывается поверх красного прямоугольника.

> Как вставить SVG в HTML-документ

  • Если это HTML5-документ, можно писать SVG-код прямо в нём

  • SVG можно создать динамически с помощью JS и вставить в DOM
    - Точно также, как можно это делать с другими HTML-элементами.

  • С помощью <object>

      <object data="image.svg" type="image/svg+xml" />

  • С помощью <iframe>

      <iframe src="image.svg"></iframe>

  • С помощью <img> (но не работает в Firefox<4.0)
    - Лучше так не делать.

> Возможные типы SVG-файлов

  • Текстовый файл .svg
    - Обычный SVG-файл является обычным текстовым файлом.
    - Рекомендуемое расширение: .svg
    - Имя файла рекомендуется писать в нижнем регистре.

  • Gzip-файл .svgz
    - В некоторые крупных приложениях SVG-файлы могут быть гигантскими.
    - Поэтому SVG-спецификация допускает gzip-сжатые SVG-файлы.
    - Рекомендуемое расширение для них: .svgz
    - Имя файла рекомендуется писать в нижнем регистре.
    - Однако, трудно заставить многие браузеры правильно их отображать.
    - Поскольку, для таких типов файлов отсутствует соответствующий MIME.
    - Поэтому, использования svgz следует использовать с осторожностью.
      Желательно, только если ты профессионал в этой теме, и хорошо понимаешь, что делаешь.

> HTTP-заголовки при работе с SVG-файлами

  ▪ Для .svg

      Content-Type: image/svg+xml
      Vary: Accept-Encoding

  ▪ Для .svgz

      Content-Type: image/svg+xml
      Content-Encoding: gzip
      Vary: Accept-Encoding

> Позиционирование элементов

  • Система координат с нулевой точкой в верхнем левом углу
    - Для всех элементов SVG использует эту систему координат.
    - В ней нулевая точка (0,0) расположена в верхнем-левом углу эл-та <svg>.
    - Положительная ось X направлена вправо, а ось Y вниз.
    - В принципе, аналогичным образом позиционируются DOM-элементы в HTML.

  • Про единицы измерения в системе координат SVG

    ▪ Единицы измерения в общем случае
      - В общем случае 1px равен одному пикселю вашего монитора.

    ▪ Абсолютные и относительные единицы измерения
      - Однако, SVG имеет слово "Scalable" в своём названии не спроста.
      - Как в CSS есть абсолютные и относительные размеры шрифта,
        так и в SVG есть абсолютные и относительные единицы измерения.
      - Абсолютными являются такие, как пиксели или сантиметры.
      - А относительными, так называемые пользовательские пиксели.

  • Пользовательская система координат

    ▪ Случай, когда 1px на мониторе равен 1-му пользовательскому пикселю
      - В данном случае мы задаём размер SVG-элемента равный 100x100 единиц.
      - Поскольку мы не применяем viewBox или другие масштабирующие эффекты,
        получается, 1px на мониторе равен 1-му пользовательскому пикселю

          <svg width="100" height="100">

    ▪ Случай, когда 1-ин пользовательский пиксел равен 2px на мониторе
      - Чтобы получит такую картину, надо увеличить масштаб в 2 раза.
      - Для этого создадим SVG-элемент размерами 200x200px.
      - А viewBox зададим от (0,0) до (100,100).
      - Таким образом, мы увеличим масштаб SVG-изображения в 2 раза.
      - Что такое viewBox наглядно показано здесь: https://svg-art.ru/?p=1083

          <svg width="200" height="200" viewBox="0 0 100 100">

    ▪ Кроме масштабировия, есть ещё деформации
      - При деформациях соотношение экранного px и пользовательского
        также могут меняться.

    ▪ Постоянные величины (cm, in, и т.д)
      - Можно задавать размеры SVG-элементов и в постоынных величинах.
      - Тогда они рассчитываются при масштабировании, деформациях, и т.д,
        так, чтобы в результирующих изображениях появляться в размерах
        1:1.
      - Т.Е. 1 экранный пиксель д.б. равен 1 пикселю данного элемента.
      - Короче говоря, их затруднительно становится масштабировать и т.д.


А2. Paths

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение

    ▪ Для чего полезен элемент path
    ▪ Главным атрибутом элемента path является d
    ▪ Использовать polylines для имитации "кривых" фигур не стоит
    ▪ Создание сложных путей в ручном режиме не рекомендуется

  # Справочник по синтаксису кода в атрибуте d

    ▪ М,m     | Перемещение курсора
    ▪ L,l     | Прямые линии
    ▪ H,h     | Прямые горизонтальные линии
    ▪ V,v     | Прямые вертикальные линии
    ▪ A,a     | Эллиптические кривые
    ▪ C,c     | Кривые Безье из начальной точки
    ▪ S,s     | Кривые Безье из текущей точки (гладкое соединение кривых Безье)
    ▪ Q,q     | Квадратичные кривые Безье от начальной точки
    ▪ T,t     | Квадратичные кривые Безье от текущей точки

--------------------------------------

> Ссылки

  # Серия статей по работе с SVG-элементом <path>
      https://svg-art.ru/?page_id=897

> Введение

  • Для чего полезен элемент path
    - Это самый гибкий инструмент в SVG для отрисовки:

      ▪ Прямых
      ▪ Кривых
      ▪ Фигурных линий
      ▪ Сложных открытых и замкнутых контуров.

  ▪ Главным атрибутом элемента path является d
    - Он содержит строку с кодом для отрисовки пути.
    - Этот код определяет направление и траекторию фигурной линии.

  ▪ Использовать polylines для имитации "кривых" фигур не стоит
    - Вообще, сложные фигуры из прямых линий можно делать и с помощью polylines.
    - Но для имитации кривых polylines составляет их из множества "коротких" прямых.
    - Это приводит к большому весу SVG, и невозможности корректного масштабирования.

  ▪ Создание сложных путей в ручном режиме не рекомендуется
    - Речь идёт действительно о масштабных и сложных путях.
    - Создавать их в текстовом редакторе не стоит, слишком муторно.
    - Лучше действовать программными средствами, написать скрипт и т.д.

> Справочник по синтаксису кода в атрибуте d


  // М,m //
  //-----//

    ▪ Описание
      - Перемещение курсора.
      - Переместить курсор в точку с коорд. (x,y).

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - M x y
      - m x y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/5b04o1tL/

    ▪ Команда M часто применяется для установки 1-й точки пути.
      - Т.Е. первая точка устанавливается с использованием абсол.координат.
      - Поскольку использовать относ.нельзя, ведь предыдущей точки ещё нет.


  // L,l //
  //-----//

    ▪ Описание
      - Прямые линии.
      - Нарисовать прямую от текущей точки к точке с коорд. (x,y)

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - L x y
      - l x y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/5b04o1tL/

    ▪ Если в конце поставить z, контур автоматически замкнётся
      - А если не поставить, то не замкнётся.
      - Например:

        ▪ Этот контур автоматически замкнётся:
            <path d="M 10 210 L 110 10 L 210 210 z" fill="#9DE281" stroke-width="3" stroke="#FDD000"  />

        ▪ А этот нет, потому что в конце строки d нет z
            <path d="M 10 210 L 110 10 L 210 210" fill="#9DE281" stroke-width="3" stroke="#FDD000"  />


  // H,h //
  //-----//

    ▪ Описание
      - Прямые горизонтальные линии.
      - Нарисовать гориз.прямую от текущей точки к точке с коорд. x

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - H x
      - h x

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/dr77crqL/

    ▪ Если в конце поставить z, контур автоматически замкнётся
      - А если не поставить, то не замкнётся.


  // V,v //
  //-----//

    ▪ Описание
      - Прямые вертикальные линии.
      - Нарисовать вертик.прямую от текущей точки к точке с коорд. y

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - V y
      - v y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/dr77crqL/

    ▪ Если в конце поставить z, контур автоматически замкнётся
      - А если не поставить, то не замкнётся.


  // A,a //
  //-----//

    ▪ Описание
      - Эллиптические кривые.
      - Нарисовать эллиптическую кривую из начальной точки в конечную.
      - Пояснения к синтаксису:

        ▪ mx,my             | Начальная точка
        ▪ x,y               | Конечная точка
        ▪ rx,ry             | Радиусы дуги эллипса
        ▪ x-axis-rotation   | Угол поворота всей дуги эллипса относ.оси X
        ▪ large-arc-flag    | Выводить большую или меньшую часть дуги
        ▪ sweep-flag        | Направление отрисовки дуги из начальной точки в конечную

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - A mx,my rx,ry x-axis-rotation large-arc-flag sweep-flag x,y
      - a mx,my rx,ry x-axis-rotation large-arc-flag sweep-flag x,y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/oja7ocz0/

    ▪ Эллипс никогда не прорисовывается до конца (соединения с начальной точкой)
      - В том плане, чтобы образовывать законченный эллпис.
      - Но если в конце поставить z, то нач.и кон.точки будут соединены прямой.
      - В отличие от базовой фигуры SVG-ellipse.

    ▪ Дуга эллипса не будет отрисована, если координаты нач.и кон.точек совпадают
      - Сабж.

    ▪ Если в конце поставить z, контур автоматически замкнётся
      - А если не поставить, то не замкнётся.

    ▪ Пояснения с иллюстрациями к работе A,a на svg-art.ru
        https://svg-art.ru/?page_id=900#comm_a


  // C,c //
  //-----//

    ▪ Описание
      - Кривые Безье из начальной точки.
      - Нарисовать кубическую кривую Безье из начальной точки в конечную.
      - Пояснения к синтаксису:

        ▪ mx,my     | Координаты начальной точки, задаются с помощью M.
        ▪ x1,y1     | Координаты первой контрольной точки.
        ▪ x2,y2     | Координаты второй контрольной точки.
        ▪ x,y       | Координаты финальной точки кривой Безье.

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - M mx,my C x1,y1 x2,y2 x,y
      - m mx,my c x1,y1 x2,y2 x,y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/ped5prmh/


  // S,s //
  //-----//

    ▪ Описание
      - Кривые Безье из текущей точки (гладкое соединение кривых Безье).
      - Нарисовать кубическую кривую Безье из текущей точки в конечную.
      - При взаимодействии контрольных точек двух соседних кривых Безье,
        соединение может получиться не совсем гладким, под острым углом.
      - Для гарантированного гладкого соединения двух кривых Безье и
        применяется команда S.
      - При этом для S отбрасываются координаты начальной точки, и 1-й контрольной.
      - Пояснения к синтаксису:

        ▪ x2,y2     | Координаты 2-й контрольной точки.
        ▪ x,y       | Координаты финальной точки кривой Безье.

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - M mx,my C x1,y1 x2,y2 x,y S x2,y2 x,y
      - m mx,my C x1,y1 x2,y2 x,y S x2,y2 x,y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/fk5wdtuz/


  // Q,q //
  //-----//

    ▪ Описание
      - Квадратичные кривые Безье от начальной точки.
      - Нарисовать квадратичную кривую Безье из начальной точки в конечную.
      - Квадратичные кривые Безье похожи на кубические, но имеют лишь 1-ну контрольную точку.
      - Пояснения к синтаксису:

        ▪ mx,my     | Координаты начальной точки, задаются с помощью M.
        ▪ x1,y1     | Координаты контрольной точки.
        ▪ x,y       | Координаты финальной точки кривой Безье.

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - Q mx,my x1,y1 x,y
      - q mx,my x1,y1 x,y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/j4yb3zc0/


  // T,t //
  //-----//

    ▪ Описание
      - Квадратичные кривые Безье из текущей точки (гладкое соединение кривых Безье).
      - Нарисовать квадратичную кривую Безье от текущей точки в конечную.
      - При взаимодействии контрольных точек двух соседних кривых Безье,
        соединение может получиться не совсем гладким, под острым углом.
      - Для гарантированного гладкого соединения двух кривых Безье и
        применяется команда S.
      - При этом для T отбрасываются координаты начальной и контрольной точек.
      - Пояснения к синтаксису:

        ▪ x,y       | Координаты финальной точки кривой Безье.

    ▪ Абсолютные и относительные координаты
      - Команда в верхнем регистре использует абсолютные координаты, относ.начала координат.
      - Команда в нижнем регистре использует относительные координаты, относ.предыдущей точки.

    ▪ Синтаксис
      - Q mx,my x1,y1 x,y T x,y
      - q mx,my x1,y1 x,y t x,y

    ▪ Пример использования на jsfiddle
        https://jsfiddle.net/GermanM/3dx44ufk/


А3. Шаблон SVG-файла

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение
  # Шаблон SVG-файла

--------------------------------------

> Ссылки

  # Ссылка на оригинальную статью в блоге svg-art.ru
      https://svg-art.ru/?page_id=1009

> Введение
  - Это короткая глава, в которой лежит шаблон для SVG-файлов.

> Шаблон SVG-файла

  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
  <svg  version="1.1" width="1280" height="1024"
          viewBox="0 0 1280 1024"
       baseProfile="full"
       xmlns="http://www.w3.org/2000/svg"
       xmlns:xlink="http://www.w3.org/1999/xlink"
       xmlns:ev="http://www.w3.org/2001/xml-events">

      <title>My first SVG file</title>
       <desc>
         Red and yellow rectangles.
         The yellow rectangle has a blue frame.
       </desc>

          <defs>

          </defs>

              <g id = "gr1">
                  <rect x="30" y="50" width="120" height="50"
                     style="fill-opacity: 0.7; fill: red;" />
                  <rect x="30" y="140" width="120" height="50"
                     style="fill:yellow; stroke-width:3; stroke: blue;"/>
              </g>

   </svg>


А4. Как добавить SVG в HTML5-страницу

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение
  #

--------------------------------------

> Ссылки

  # Оригинальная статья про добавление SVG в HTML5 на svg-art.ru
      https://svg-art.ru/?page_id=1047

> Введение
  - В этой главе подробно рассмотрено, как добавить SVG в HTML5.
  - Рассмотрены все перечисленные в статье из ссылок способы.
  - Не знаю, есть ли ещё другие способы, но думаю, этих должно быть достаточно.

>


А5. Градиенты в SVG

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение

    ▪ О чём эта глава
    ▪ В SVG есть линейный и угловой градиенты
    ▪ Каждый градиент обязан иметь атрибут с уникальным ID
    ▪ Градиенты определяются между тегами <defs></defs>
    ▪ Применить градиент можно в теге style или в атрибуте fill

  # Линейный градиент

    ▪ Теги <stop> внутри блока тегов <linearGradient>, и его атрибуты
    ▪ Атрибуты линейного градиента
    ▪ Пример линейного градиента

  # Имитация углового градиента

    ▪ 6 дуг, образующих кольцо
    ▪ Для каждой дуги свой линейный градиент
    ▪ Цвет начала, цвет конца каждого л.градиента
    ▪ Градиент назначается сегменту кольца с помощью stoke
    ▪ Градиент каждого сегмента имеет своё направление
    ▪ Пример имитации углового градиента, образующий радужное кольцо

--------------------------------------

> Ссылки

  # Статься про градиенты на developer.mozilla.org
      https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Gradients

  # Имитация углового градиента на SVG путём разбивки на линейные
      http://stackoverflow.com/questions/18206361/svg-multiple-color-on-circle-stroke
      http://jsfiddle.net/Weytu/
 
  # Здесь можно поиграться с линейным градиентом
      http://www.w3schools.com/svg/tryit.asp?filename=trysvg_linear

> Введение
  
  • О чём эта глава
    - В этой главе рассмотрим, как делать градиент в SVG.
    - Также рассмотрим решение для организации уголового градиента.

  • В SVG есть линейный и угловой градиенты
    - То есть, всего 2 типа градиентов.
    - И никакого углового градиента нативно не поддерживается.

  • Каждый градиент обязан иметь атрибут с уникальным ID
    - Иначе другие элементы не будут иметь к нему доступ.

  • Градиенты определяются между тегами <defs></defs>
    - Потом к определённым градиентам можно обращаться по ID.
    - И, таким образом, применять их к другим SVG-элементам.

  • Применить градиент можно в теге style или в атрибуте fill
    - Можно применить градиент в теге style, применив ID  
      SVG-элемента, к которому надо применить градиент (см.пример ниже).
    - А можно применить градиент в атрибуте fill SVG-элемента.

> Линейный градиент

  • Теги <stop> внутри блока тегов <linearGradient>, и его атрибуты
    - Внутри блока тегов <linearGradient> применяются теги <stop>
    - Каждый тег <stop> имеет атрибуты:

        ▪ offset        | Значение от 0% до 100%, обозначающее позицию между началом и концом градиента
          - Символ % в offset можно опускать.
          - В первом <stop> offset всегда д.б. 0.
          - В каждом последующем <stop> offset всегда д.б. больше, чем в предыдущем.
          - В последнем <stop> offset всегда д.б. 100.
          - Offset д.б. целым неотрицательным числом от 0 до 100.
          - При появлении <stop> с тем же offset, будет использоваться лишь самый поздний.
        ▪ stop-color    | Какой цвет д.б. к этой позиции
        ▪ stop-opacity  | Полупрозрачность к этой позиции (от 0 до 1)

    - Эти св-ва можно указать для эл-та stop и через CSS.
    - Количество тегов <stop> в блоке <linearGradient> не ограничено.
    - Пример использования см.ниже.

  • Атрибуты линейного градиента
    - Тег linearGradient принимает несколько атрибутов.
    - Среди них есть 1-ин обязательный (ID), все остальные - нет.
    - Вот они:

        ▪ id    | [Обязательный атрибут] ID градиента 
        ▪ x1    | X-координата точки 1 управления ориентацией градиента
        ▪ x2    | X-координата точки 2 управления ориентацией градиента
        ▪ y1    | Y-координата точки 1 управления ориентацией градиента
        ▪ y2    | Y-координата точки 2 управления ориентацией градиента

    - Значениями x1,x2,y1,y2 могут быть проценты, то есть,
      от 0% до 100%, или от 0 (0%) до 1 (100%) (без знака %).

  • Пример линейного градиента
    - В этом примере мы рисуем на SVG 2 квадрата.
    - И определяем в теге defs 2 градиента.
    - Gradient1 мы применяем к 1-му квадрату с помощью style.
    - А Gradient2 мы применяем ко 2-му квадрату с помощью атрибута fill="url(#Gradient2).

      <svg width="120" height="240" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>

            <linearGradient id="Gradient1">
              <stop class="stop1" offset="0%"/>
              <stop class="stop2" offset="50%"/>
              <stop class="stop3" offset="100%"/>
            </linearGradient>

            <linearGradient id="Gradient2" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0%" stop-color="red"/>
              <stop offset="50%" stop-color="black" stop-opacity="0"/>
              <stop offset="100%" stop-color="blue"/>
            </linearGradient>

            <style type="text/css"><![CDATA[
              #rect1 { fill: url(#Gradient1); }
              .stop1 { stop-color: red; }
              .stop2 { stop-color: black; stop-opacity: 0; }
              .stop3 { stop-color: blue; }
            ]]></style>

        </defs>
       
        <rect id="rect1" x="10" y="10" rx="15" ry="15" width="100" height="100"/>
        <rect x="10" y="120" rx="15" ry="15" width="100" height="100" fill="url(#Gradient2)"/>
        
      </svg>  

> Имитация углового градиента

  ▪ 6 дуг, образующих кольцо
    - Имеются 6 сегментов кольца, по 60 градусов каждый.
    - Эти 6 сегментов образуют полное кольцо, 360 градусов в сумме.

  ▪ Для каждой дуги свой линейный градиент
    - Для каждой из 6-ти дуг создаётся свой линейный градиент.
    
  ▪ Цвет начала, цвет конца каждого л.градиента
    - Градиент каждой следующий дуги начинается с того же самого
      цвета, которым заканчивается градиент предыдущей дуги.

  ▪ Градиент назначается сегменту кольца с помощью stoke
    - Дуги, образующие кольцо, выполнены с помощью <path>.
    - Градиент им назначается с помощью атрибута stroke.

  ▪ Градиент каждого сегмента имеет своё направление
    - Управление направлением производится с помощью атрибутов 
      x1,y1, x2,y2 элементов linearGradient.
    - Логика такая, начало координат в левом верхнем углу,
      а направление градиента от точки (x1,y1) к точке (x2,y2).
    - Обозначение направлений (x1,y1)(x2,y2):

        (0,0)(1,1)    | Слева-сверху вправо-вниз
        (0,0)(0,1)    | Сверху-вниз
        (1,0)(0,1)    | Справа-сверху влево-вниз
        (1,1)(0,0)    | Справа-снизу влево-вверх
        (0,1)(0,0)    | Внизу-вверх
        (0,1)(1,0)    | Слева-снизу вправо-вверх

  ▪ Пример имитации углового градиента, образующий радужное кольцо  

    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="-10 -10 220 220">
      <defs>
        <linearGradient id="redyel" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#ff0000"/>   
            <stop offset="100%" stop-color="#ffff00"/>   
        </linearGradient>
        <linearGradient id="yelgre" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#ffff00"/>   
            <stop offset="100%" stop-color="#00ff00"/>   
        </linearGradient>
        <linearGradient id="grecya" gradientUnits="objectBoundingBox" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#00ff00"/>   
            <stop offset="100%" stop-color="#00ffff"/>   
        </linearGradient>
        <linearGradient id="cyablu" gradientUnits="objectBoundingBox" x1="1" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="#00ffff"/>   
            <stop offset="100%" stop-color="#0000ff"/>   
        </linearGradient>
        <linearGradient id="blumag" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="#0000ff"/>   
            <stop offset="100%" stop-color="#ff00ff"/>   
        </linearGradient>
        <linearGradient id="magred" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="1" y2="0">
            <stop offset="0%" stop-color="#ff00ff"/>   
            <stop offset="100%" stop-color="#ff0000"/>   
        </linearGradient>
      </defs>

      <g fill="none" stroke-width="15" transform="translate(100,100)">
        <path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#redyel)"/>
        <path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#yelgre)"/>
        <path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#grecya)"/>
        <path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cyablu)"/>
        <path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#blumag)"/>
        <path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#magred)"/>
      </g>
    </svg>






Аn. Библиотека примеров и наработок на SVG

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение
  # Библиотека примеров

    1] Базовый пример: квадрат, круг, текст
    2] Наглядная демонстрация пользовательской системы координат
    3] Квадрат, круг, эллипс, линия, полилиния, полигон, кривая

    4] Paths: перемещение курсора (M,m) и прямая линия (L,m)
    5] Paths: горизонтальные (H,h) и вертикальные (V,v) линии
    6] Paths: эллиптические кривые (A,a)
    7] Paths: кривые Безье из начальной точки (С,с)
    8] Paths: кривые Безье из текущей точки (S,s), гладкое соединение
    9] Paths: квадратичные кривые Безье от начальной точки (Q,q)
    10] Paths: Квадратичные кривые Безье из текущей точки (гладкое соединение кривых Безье)

--------------------------------------

> Ссылки

  # Здесь можно вживую посмотреть все примеры
      https://jsfiddle.net/GermanM

> Введение
  - Это библиотека примеров на SVG.
  - Каждый пример представляет собой описание и ссылку на jsfiddle.
  - Коды примеров в этом документе отсутствуют по соображениям его размера.

> Библиотека примеров

  // 1] Базовый пример: квадрат, круг, текст //
  //-----------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/gsssh8vo/

    • Описание примера
      - В этом примере мы создаём корневой SVG-элемент шириной 300px, высотой 200px.
      - И в него помещаем красный прямоугольник, зелёный круг и текст.

  // 2] Наглядная демонстрация пользовательской системы координат //
  //--------------------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/3jq939Lv/

    • Описание примера
      - В этом примере наглядно показывается, что такое пользовательская система координат.

  // 3] Квадрат, круг, эллипс, линия, полилиния, полигон, кривая //
  //-------------------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/0uzpcn17/

    • Описание примера
      - Наглядно показывается применения перечисленных графических элементов.

  // 4] Paths: перемещение курсора (M,m) и прямая линия (L,m) //
  //----------------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/5b04o1tL/

    • Описание примера
      - В этом простейшем примере с помощью path нарисуем треугольник.
      - Фон треугольника будет зелёный, а рамка толщиной 3upx. оранжевой.
      - В конце d-строки стоит z, поэтому контур автоматически замыкается.

  // 5] Paths: горизонтальные (H,h) и вертикальные (V,v) линии //
  //-----------------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/dr77crqL/

    • Описание примера
      - В этом простейшем примере с помощью path нарисуем лесенку.
      - Фон треугольника будет серым, а рамка толщиной 3upx. красной.
      - В конце d-строки стоит z, поэтому контур автоматически замыкается.

  // 6] Paths: эллиптические кривые (A,a) //
  //--------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/oja7ocz0/

    • Описание примера
      - В этом примере наглядно показаны принципы работы с эллипсами.
      - Немного поигрались с параметрами.
      - Пояснения с иллюстрациями к работа A,a на svg-art.ru:
          https://svg-art.ru/?page_id=900#comm_a

  // 7] Paths: кривые Безье из начальной точки (С,с) //
  //-------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/ped5prmh/

    • Описание примера
      - В этом примере наглядно показаны принципы работы с кубическими кривыми Безье.
      - В примере меняются координаты 1-й и 2-й контрольных точек.
      - А относительное расположение координат нач.и кон.точек неизменно (абсол.значения меняются).
      - Пояснения с иллюстрациями к работа A,a на svg-art.ru:
          https://svg-art.ru/?page_id=907#comm_cubic

  // 8] Paths: кривые Безье из текущей точки (S,s), гладкое соединение //
  //-------------------------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/fk5wdtuz/

    • Описание примера
      - В этом примере наглядно показаны принципы работы с кубическими кривыми Безье.
      - А именно, производится "гладкое" соединение 2-х таких кривых.
      - Пояснения с иллюстрациями к работа A,a на svg-art.ru:
          https://svg-art.ru/?page_id=907#comm_cubic

  // 9] Paths: квадратичные кривые Безье от начальной точки (Q,q) //
  //--------------------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/j4yb3zc0/

    • Описание примера
      - В этом примере наглядно показаны принципы работы с квадратичными кривыми Безье.
      - Пояснения с иллюстрациями к работа A,a на svg-art.ru:
          https://svg-art.ru/?page_id=914#comm_Quadratic

  // 10] Paths: Квадратичные кривые Безье из текущей точки (гладкое соединение кривых Безье) //
  //-----------------------------------------------------------------------------------------//

    • Ссылка на jsfiddle
        https://jsfiddle.net/GermanM/3dx44ufk/

    • Описание примера
      - В этом примере наглядно показаны принципы работы с квадратичными кривыми Безье.
      - А именно, производится "гладкое" соединение 2-х квадратичных кривых Безье.
      - Пояснения с иллюстрациями к работа A,a на svg-art.ru:
          https://svg-art.ru/?page_id=914#comm_Quadratic






Б1. Основы D3.js

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение

  # Введение в D3: это JS-библиотека
  # Введение в D3: html + css + svg
  # Введение в D3: главной целью является визуализация данных
  # Введение в D3: кроссбраузерность, поддержка всеми кроме IE<=8

  # Основы D3: привязка произвольных данных к DOM
  # Основы D3: это не швейцарский нож, а направленный инструмент
  # Основы D3: повторное использование кода через компоненты и плагины
  # Основы D3: выборки
  # Основы D3: динамический свойства
  # Основы D3: enter & exit
  # Основы D3: transitions
  # Основы D3: нет автопрефиксера для браузерных префиксов

--------------------------------------

> Ссылки

> Введение
  - Цель этой главы сформировать общее представление о d3.
  - Получить цельную, общую картину мелким планом без лишних деталей.

> Введение в D3: это JS-библиотека
  - D3.js является js-библиотекой.
  - Используется для манипулирования документами на основе данных.
  - То есть, берутся какие-то элементы из DOM, и с ними проводятся манипуляции.

> Введение в D3: html + css + svg
  - Под капотом D3 использует html, css и svg.
  - Таким образом, D3 и canvas не имеют ничего общего.

> Введение в D3: главной целью является визуализация данных
  - D3 создана для удобной визуализации данных.

> Введение в D3: кроссбраузерность, поддержка всеми кроме IE<=8
  - Библиотека D3 является кроссбраузерной.
  - D3 поддерживается всеми современными браузерами.
  - D3 не поддерживается IE8 и ниже.

> Основы D3: привязка произвольных данных к DOM
  - В HTML есть понятие Document Object Model (DOM).
  - По сути, это структура документа, стстоящая из элементов.
  - D3 позволяет привязывать произвольные данные к элементам DOM.
  - Например, можно сгенерировать таблицу из массива чисел.
  - Или, например, создать бар-график на основе тех же данных.

> Основы D3: это не швейцарский нож, а направленный инструмент
  - D3 не является монолитным фреймворком, стремящемся решать все проблемы.
  - Он заточен лишь для решения 1-й задачи: 

      Эффективная манипуляция документами на основе данных.

  - Благодаря этому, D3 работает чрезвычайно быстро.
  - И может работать даже с огромными массивами данных.
  - Поддерживает динамическиеизменения и анимацию.

> Основы D3: повторное использование кода через компоненты и плагины
  - В D3 продумана тема повторного использования кода.
  - Ссылки на репозитории с ними см.в ссылках этого документа.

> Основы D3: выборки
  - Это типа D3-коллекций DOM-элементов.
  - С которыми потом с помощью D3 можно производить манипуляции.
  - Например, изменим "color" всех DOM-элементов p на "white":

      d3.selectAll("p").style("color", "white");

  - Получять эти коллекции можно, используя различные признаки.
  - Включая class, id, значения атрибутов, содержание.

> Основы D3: динамический свойства
  - Стили, атрибуты и прочие св-ва в D3 могут быть функциями.
  - Это даёт широкие возможности, и позволяет заготавливать эти функции.
  - В D3 есть множество подобного рода заготовленных функций.
  - Например, раскрасим случайным образом все DOM-элементы p:

      d3.selectAll("p").style("color", function() {
        return "hsl(" + Math.random() * 360 + ",100%,50%)";
      });  

> Основы D3: привязка данных к выборкам
  - К выборке можно привязать данные.
  - Чтобы потом на основе этих данных модифицировать выборку.
  - Однажды привязав данные, повторно можно их не привязывать.
  - Например, при обновлении выборки этого делать уже не обязательно.
  - Пример:

      d3.selectAll("p")
          .data([4, 8, 15, 16, 23, 42])
          .style("font-size", function(d) { return d + "px"; });  

> Основы D3: enter & exit
  - В D3 есть так называемые enter и exit выборки.
  - С их помощью можно создавать новые узлы для входящих данных.
  - И удалять старые узлы, которые больше не нужны.
  - Итак, домустим у нас есть данные, привязанные к выборке.
  - Каждый элемент в массиве данных связан с соотв.узлом из выборки.
  - Если узлов меньше, чем данных, то лишние эл-ты попадают в выборку enter.
  - Которую можно инициировать, добавив туда элементов. Пример:

      d3.select("body").selectAll("p")
        .data([4, 8, 15, 16, 23, 42])
        .enter()
        .append("p")
        .text(function(d) { return "I’m number " + d + "!"; });  

  - Если забыть об enter/exit элементах, то при работе с выборками будут 
    учитываться лишь те элементы, для которых есть данные.
  - Общим паттерном является разбить изначальную выборку на 3 части:

      ▪ Updating nodes
      ▪ Entering nodes to add
      ▪ Exiting nodes to remove

  - Пример:

        // Update…
        var p = d3.select("body").selectAll("p")
            .data([4, 8, 15, 16, 23, 42])
            .text(function(d) { return d; });

        // Enter…
        p.enter().append("p")
            .text(function(d) { return d; });

        // Exit…
        p.exit().remove();  

> Основы D3: transitions
  - D3 имеет встроенный функционал переходов (transitions) из CSS3.
  - Так что при изменении данных всё может плавно изменяться.
  - Это приминимо как к примитивным, так и к составным значениям.
  - Например, можно плавно изменить цвет фона документа на чёрный:

      d3.select("body").transition()
          .style("background-color", "black");  

> Основы D3: нет автопрефиксера для браузерных префиксов
  - Многие привыкли работать с CSS с автопрефиксером.
  - Однако, в D3 автопрефиксинга нет, нужно иметь это в виду.


Б2. D3-модуль: selections (svg v4.*)

--------------------------------------
Подоглавление:

  # Ссылки
  # Введение
  # Справочник

    • Selecting Elements

      ▪ d3.selection        | Получить выборку из 1-го корневого элемента DOM [document.documentElement]
      ▪ d3.select           | Получить выборку из 1-го эл-та [по DOM-ссылке / 1-й по списку по селектору]
      ▪ d3.selectAll        | Получить выборку из N эл-тов [по массиву DOM-ссылок / по селектору]
      ▪ selection.select    | Получить выборку из N эл-тов на основе другой выборки [по селектору / по анонимной функции]
      ▪ selection.selectAll | Получить выборку из N эл-тов на основе другой выборки [по селектору / по анонимной функции]
      ▪ selection.filter    | Провести фильтрацию выборки [по селектору / по анонимной функции]
      ▪ selection.merge     | Объединить выборки [не произвольные, обычно ENTER + UPDATE]
      ▪ d3.matcher          | Возвращает функцию, которая возвращает true, если эл-т this соответствует указанному селектору [для внутреннего использования D3]
      ▪ d3.selector         | Возвращает функцию, которая возвращает первый для this элемент-потомок, соотв-ий указанному селектору [для внутреннего использования D3]
      ▪ d3.selectorAll      | Возвращает функцию, которая возвращает все для this элементы-потомки, соотв-щие указанному селектору [для внутреннего использования D3]
      ▪ d3.window           | Возвращает окно-владельца для указанного узла

    • Modifying Elements

      ▪ selection.classed   |
      ▪ selection.style     |
      ▪ selection.property  |
      ▪ selection.text      |
      ▪ selection.html      |
      ▪ selection.append    |
      ▪ selection.insert    |
      ▪ selection.remove    |
      ▪ selection.sort      |
      ▪ selection.order     |
      ▪ selection.raise     |
      ▪ selection.lower     |
      ▪ d3.creator          |

    • Joining Data

      ▪ selection.data      |
      ▪ selection.enter     |
      ▪ selection.exit      |
      ▪ selection.datum     |

    • Handling Events

      ▪ selection.on        |
      ▪ selection.dispatch  |
      ▪ d3.event            |
      ▪ d3.customEvent      |
      ▪ d3.mouse            |
      ▪ d3.touch            |
      ▪ d3.touches          |

    • Control Flow

      ▪ selection.each      |
      ▪ selection.call      |
      ▪ selection.empty     |
      ▪ selection.nodes     |
      ▪ selection.node      |
      ▪ selection.size      |

    • Local Variables

      ▪ d3.local            |
      ▪ local.set           |
      ▪ local.get           |
      ▪ local.remove        |
      ▪ local.toString      |

    • Namespaces

      ▪ d3.namespace        |
      ▪ d3.namespaces       |

--------------------------------------

> Ссылки

  # Ссылка на соотв.раздел документации D3 v4.*
      https://github.com/d3/d3/blob/master/README.md#selections-d3-selection

> Ведение
  - Это справочник по модулю Selections библиотеки D3 v4.*.

> Справочник

//--------------------//
// Selecting Elements //
//--------------------//

  // d3.selection //
  //--------------//
  // - d3.selection()
  // - Получить выборку из 1-го корневого элемента DOM [document.documentElement].

    • Проверка, является ли переменная D3-выборкой

      var selection = d3.selectAll("p");
      var is = selection instanceof d3.selection();   // true/false

    • Расширить прототип selection (например, добавить метод checked для проверки состояния чекбоксов)

      ▪ Расширить

          d3.selection.prototype.checked = function(value) {
            return arguments.length < 1
                ? this.property("checked")
                : this.property("checked", !!value);
          };
          d3.selectAll("input[type=checkbox]").checked(true);

      ▪ Использовать

          d3.selectAll("input[type=checkbox]").checked(true);

  // d3.select //
  //-----------//
  // - d3.select(selector)
  // - Получить выборку из 1-го эл-та [по DOM-ссылке / 1-й по списку по селектору].
  // - Если таковых найдено не будет, вернёт пустую выборку.
  // - Если такувых будет найдено много, вернёт лишь 1-й из них.

    • Если selector является css-селектором
      - Получить выборку из 1-го найденный элемента "a"

        var anchor = d3.select("a");

    • Если selector не является строкой
      - Тогда это должна быть DOM-ссылка (или функция, её возвращающая).
      - Пример ниже окрасит шрифт всех эл-тов "p" в документе в красный цвет:

          d3.selectAll("p").on("click", function() {
            d3.select(this).style("color", "red");
          });

  // d3.selectAll //
  //--------------//
  // - d3.selectAll(selector)
  // - Получить выборку из N эл-тов [по массиву DOM-ссылок / по селектору].
  // - Если ничего не найдёт, вернёт пустую выборку.

    • Если selector является css-селектором
      - Получить все элементы "p" в документе:

          var paragraph = d3.selectAll("p");

    • Если selector не является строкой
      - Тогда это должен быть массив ссылок на DOM-узлы.
      - Это полезно, когда таковой имеется.
      - Это также может быть псевдо-массив, как NodeList или argumetns.
      - Например, this.childNodes в обработчике событий, или document.links.
      - Например, покрасить все ссылки в красный цвет:

          d3.selectAll(document.links).style("color", "red");

  // selection.select  //
  //-------------------//
  // - selection.select(selector).
  // - Получить выборку из N эл-тов на основе другой выборки [по селектору / по анонимной функции].
  // - Для каждого эл-та из selection, выбрать среди его потомков 1-й
  //   элемент, который соответствует указанному selector.
  // - Если selector пуст или null, все эл-ты в новой выборке тоже будут пустые.
  // - Если эл-т из текущей выборки имеет связанные данные, то новый элемент,
  //   полученный среди его потомков, тоже будет связан с этими данными.
  // - Если для эл-та X найдено среди его потомков > 1 элементов, соответствующих
  //   selector, будет взят лишь 1-й из них.

    • Если selector является css-селектором
      - Для каждого эл-та "p" в док-те выбрать среди его потомков 1-й эл-т "b":

          var b = d3.selectAll("p").select("b");

    • Если selector не является css-селектором
      - А является функцией, она будет выполнена для каждого эл-та выборки.
      - В функцию будут переданы: d (данные), i (индекс), nodes и this (DOM-ссылка на текущий эл-т).
      - Функция должна возвращать 1-ин элемент.
      - Для каждого эл-та "p" в док-те выбрать 1-го предыдущего соседа:

          var previous = d3.selectAll("p").select(function() {
            return this.previousElementSibling;
          });

  // selection.selectAll //
  //---------------------//
  // - selection.selectAll(selector).
  // - Получить выборку из N эл-тов на основе другой выборки [по селектору / по анонимной функции].
  // - Для каждого эл-та из selection, выбрать среди его потомков ВСЕ
  //   элементы, которые соответствуют указанному selector.
  // - То есть, на 1-им элемент в selection м.б. найдено N элементов-потомков,
  //   соответствующих selector. Они будут сгруппированы по своим топовым узлам.
  // - Если соответствующих selector элементов для эл-та из selection не найдено,
  //   или если selector пуст или null, группа для этого индекса тоже будет пустая.
  // - Элементы в новой выборке не наследуют данные от элементов в старом.
  //   Используй selection.data для распространения данных в эл-ты новой выборки.

    • Если selector является css-селектором
      - Для каждого эл-та "p" в док-те выбрать среди его потомков ВСЕ эл-ты "b":

          var b = d3.selectAll("p").selectAll("b");

    • Если selector не является css-селектором
      - А является функцией, она будет выполнена для каждого эл-та выборки.
      - В функцию будут переданы: d (данные), i (индекс), nodes и this (DOM-ссылка на текущий эл-т).
      - Функция должна возвращать массив элементов (или псевдо-массив, вроде NodtList или arguments).
      - Или же пустой массив, если нет соответствующих элементов.
      - Для каждого эл-та "p" в док-те выбрать 1-ых предыдущего и следующего соседей:

          var sibling = d3.selectAll("p").selectAll(function() {
            return [
              this.previousElementSibling,
              this.nextElementSibling
            ];
          });

  // selection.filter //
  //------------------//
  // - selection.filter(filter).
  // - Провести фильтрацию выборки [по селектору / по анонимной функции].
  // - Вернёт новую выборку, содержащую лишь элементы, прошедшие фильтрацию.
  // - При этом индексы не сохраняются.

    • Если filter является css-селектором
      - Получить все эл-ты "tr" в документе, отфильтровать все нечётные:

          var even = d3.selectAll("tr").filter(":nth-child(even)");

      - Это примерно тоже самое, что сделать вот так:

          var even = d3.selectAll("tr:nth-child(even)");

    • Если selector не является css-селектором
      - А является функцией, она будет выполнена для каждого эл-та выборки.
      - В функцию будут переданы: d (данные), i (индекс), nodes и this (DOM-ссылка на текущий эл-т).
      - Получить все эл-ты "tr" в документе, отфильтровать все нечётные:

          var even = d3.selectAll("tr").filter(function(d, i) { return i & 1; });

      - Это примерно тоже самое, что сделать вот так:

          var even = d3.selectAll("tr").select(function(d, i) { return i & 1 ? this : null; });

  // selection.merge //
  //-----------------//
  // - selection.merge(other).
  // - Объединить выборки [не произвольные, обычно ENTER + UPDATE].
  // - Возвращает новую выборку, объединяя выботки selection с other.
  // - Результирующая выборка имеет то же число групп и родителей, что и selection.
  // - Обычно этот метод используется для объединения выборок enter и update после data-join.
  //   Мосле модификации эл-тов в выборках enter и update, можно их
  //   объединить, и выполнять операции сразу на всех эл-х выборки enter+update.

    • UPDATE

        var circle = svg.selectAll("circle").data(data) // UPDATE
            .style("fill", "blue");

    • EXIT

        circle.exit().remove();   // EXIT

    • ENTER, ENTER + UPDATE

        circle.enter().append("circle") // ENTER
          .style("fill", "green")
          .merge(circle)                // ENTER + UPDATE
          .style("stroke", "black");

  // d3.matcher //
  //------------//
  // - d3.matcher(selector).
  // - Возвращает функцию, которая возвращает true, если эл-т this соответствует указанному селектору [для внутреннего использования D3].
  // - Автопрефиксинг для браузерных префиксов не поддерживается.

    • Например, эти 2 выражения эквивалентны:

        var div = selection.filter("div");
        var div = selection.filter(d3.matcher("div"));

  // d3.selector //
  //-------------//
  // - d3.selector(selector).
  // - Возвращает функцию, которая возвращает первый для this элемент-потомок, соотв-ий указанному селектору [для внутреннего использования D3].

    • Например, эти 2 выражения эквивалентны:

        var div = selection.select("div");
        var div = selection.select(d3.selector("div"));

  // d3.selectorAll //
  //----------------//
  // - d3.selectorAll(selector).
  // - Возвращает функцию, которая возвращает все для this элементы-потомки, соотв-щие указанному селектору [для внутреннего использования D3].

    • Например, эти 2 выражения эквивалентны:

        var div = selection.selectAll("div");
        var div = selection.selectAll(d3.selectorAll("div"));

  // d3.window //
  //-----------//
  // - d3.window(node).
  // - Возвращает окно-владельца для указанного node.


