/* INFO
Операторы манипулирования данными в таблице:
   - INSERT   |   позволяет вставить в таблицу запись
       -- вызывает пересчет всех индексов в таблице
   - DELETE   |
   - UPDATE   |
*/

-- вставить в таблицу name1.table6(ID,name,price) строку
INSERT INTO table6
    VALUES(10,'Зубочистки',35.54);  -- ID=10, name='Зубочистки', price=35.54

-- использование автоинкримента для ID
INSERT INTO table6
  VALUES(NULL,'Зубочистки',35.54);  -- ID автоматически назначается 11

-- использование автоинкримента - более предпочтительный вариант
-- - не указанные колонки будут либо NULL, либо то что было указано как DEFAULT, либо автоинкримент
INSERT INTO table6(name, price)  -- ID не указывать, он автоматом добавится (автоинкримент)
    VALUES('Зубочистки',35.54);  -- ID=12

-- вставка нескольких строк одновременно
-- - !ОПАСНОСТЬ! если хоть в 1 строке ошибка, то не внесутся все строки
INSERT INTO table6 VALUES
    (13,'Товар 13',234),
    (14,'Товар 14',234),
    (15,'Товар 15',234);

-- безопасная вставка нескольких строк одновременно
INSERT IGNORE INTO table6 VALUES  -- вставляй те строки, в которых нет ошибки
    (15,'Товар 15',234),  -- должна быть ошибка, товар с ID 15 уже есть. ИГНОРИРУЕТСЯ
    (16,'Товар 16',543),
    (17,'Товар 17',457);

-- вставка в таблицу результата выборки
INSERT INTO table6(name,price)
    SELECT user, 555 as price  -- результат SELECT должен подходить к (name,price) по структуре и типам
        FROM mysql.user;

-- способ ускорить работу операции INSERT (!!! для движка MyISAM !!!)
-- - при каждой INSERT сервер пересчитывает все индексы
-- - если нужно выполнить МНОГО (>10000) INSERT, лучше сначала выключить индексы,
--    выполнить все INSERT'ы, затем включить индексы, и они пересчитаются 1 раз при включении
ALTER TABLE table6 DISABLE KEYS;  -- выключить индексы
INSERT IGNORE INTO table6 VALUES
    (21,'Товар 21',634),
    (22,'Товар 22',745),
    (23,'Товар 23',235);
ALTER TABLE table6 ENABLE KEYS;   -- включить индексы

-- загрузка из файла в таблицу
-- - в файле должны быть все теже колонки, что и в БД
-- - в пути файла надо использовать / вместо \
LOAD DATA LOCAL    -- без LOCAL не работает                        -- загрудить данные
    INFILE 'W:/domains/localhost/4. SQL Library/6. Файл с данными.txt' -- из файла
    INTO TABLE table6                                              -- в таблицу
    FIELDS TERMINATED BY ','                                       -- чем отделены колонки в файле
    LINES TERMINATED BY '\r\n';                                    -- чем отделены строки в файле

-- приоритеты
INSERT
LOW_PRIORITY             -- низкий приоритет, если что запрос постоит в очереди
INTO table6 VALUES
    (33,'Товар 33',345);

INSERT
LOW_PRIORITY             -- высокий приоритет
INTO table6 VALUES
    (34,'Товар 34',345);

INSERT
DELAYED             -- сервер возвращает управлние программе, не дожидаясь
                      -- выполнения запроса, и выполняет его когда сможет
                      -- !УСТАРЕЛ!   !ПОДДЕРЖИВАЕТСЯ НЕ ВСЕМИ ДВИЖКАМИ!
INTO table6 VALUES
(35,'Товар 35',345);


-- удаление записей
-- -

-- удалить все записи из таблицы
DELETE FROM table6;

-- удалить определенные записи
DELETE FROM table6
    WHERE ID = 34;

-- удалить последнюю запись
DELETE FROM table6
    ORDER BY ID DESC  -- отсортировать по ID по убыванию
    LIMIT 1;          -- удалить только 1 запись

-- не удалять если есть угроза целостности ключа и у таблицы есть св-во RESCRICT
DELETE IGNORE FROM table6
    WHERE ID = 33;

-- вернуть управлние программе, не дожидаясь выполнения запроса (аналог DELAYED)
DELETE QUICK FROM table6
    WHERE ID = 32;

-- удалить с низким приоритетом
DELETE LOW_PRIORITY FROM table6
WHERE ID = 31;


-- обновить таблицу
UPDATE table6
    SET
        name = CONCAT(name, ' *'),  -- добавить * к значениям колонки name
        price = price * 1.5         -- умножить на 1.5 значения колонки price
    WHERE ID BETWEEN 30 AND 40;     -- для всех строк с ID от 30 до 40
